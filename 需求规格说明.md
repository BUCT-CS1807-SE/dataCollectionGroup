文件修改记录：

| 修改日期  | 版本 | 修改页码、章节、条款          | 修改描述                 | 作者           |
| --------- | ---- | ----------------------------- | ------------------------ | -------------- |
| 2021-4-20 | 1.0  | --                            | 创建所有条款             | 卢斯敏、尤晨宇 |
| 2021-5-13 | 1.1  | 2总体概述                     | 完善了概述内容           | 卢斯敏、尤晨宇 |
| 2021-5-14 | 2.0  | 3具体需求                     | 完善了程序需求规格说明   | 卢斯敏、尤晨宇 |
| 2021-5-15 | 3.0  | 4设计约束 5软件质量 6其他需求 | 完成所有需求规格说明内容 | 卢斯敏、尤晨宇 |
|           |      |                               |                          |                |
|           |      |                               |                          |                |

# 一、范围

文档具体包括“博物馆网站数据采集子系统”（以下简称数据采集系统）的产品描述、功能介绍、约束条件、假设和依赖以及一些待确定问题。

# 二、 总体概述

## 2.1产品描述

​	数据采集系统是博物馆应用平台的一个子系统，开发目的是为博物馆平台提供充足且可以利用的原始信息以及进行加工后的信息，并且提供可视化图表让用户能够有更好的使用体验。

​	本系统将会提供原始数据以及加工数据，并且将数据上传到数据库当中，以供后台管理子系统进行数据的管理与存储。

​	本系统将会对数据进行数据可视化处理，并且将可视化处理的图表上传到前端，用于让前端有更好的展示效果。

## 2.2 软件功能 

1、博物馆网站的数据爬取

2、博物馆信息的数据预加工

3、博物馆信息的数据导入

4、博物馆信息的数据存储

5、博物馆信息的定时数据爬取

6、博物馆数据的精加工

## 2.3 一般约束

与其他应用间的接口：与后台管理子系统接口

并行操作：无并行操作

所需高级语言：python

## 2.4 假设和依赖

使用python第三方库request、pandas、lxml、pymysql、openpyxl

# 三、 具体需求

## 3.1数据需求

将204家国家一级博物馆的数据全部存储下来并且进行保存。

##### 1.博物馆信息

| **字段中文（注释）** | **字段英文**        | **字段类型** | 主键 | 允许空 | 说明           |
| -------------------- | ------------------- | ------------ | ---- | ------ | -------------- |
| 博物馆编号           | id                  | int          | 是   | 否     | 自增，不能为空 |
| 博物馆名称           | name                | varchar      | 否   | 是     |                |
| 博物馆的类型         | type                | varchar      | 否   | 是     |                |
| 地址                 | address             | varchar      | 否   | 是     |                |
| 门票                 | TicketPrice         | int          | 否   | 是     |                |
| 开放时间             | OpeningHours        | varchar      | 否   | 是     |                |
| 建议游玩时间         | Suggestedtraveltime | varchar      | 否   | 是     |                |
| 博物馆等级           | Museumlevel         | varchar      | 否   | 是     |                |
| 博物馆对应页面的编号 | number              | varchar      | 否   | 是     |                |
| 博物馆简介           | introduction        | varchar      | 否   | 是     |                |
| 如何前往             | Howtogo             | varchar      | 否   | 是     |                |
| 周围的景点           | Scenicspotsaround   | varchar      | 否   | 是     |                |
| 封面（图片）         | cover               | varchar      | 否   | 是     |                |
| 经度                 | longitude           | float        | 否   | 是     |                |
| 维度                 | latitude            | float        | 否   | 是     |                |

##### 2.内景图

| **字段中文（注释）** | **字段英文** | **字段类型** | 主键 | 允许空 | 说明           |
| -------------------- | ------------ | ------------ | ---- | ------ | -------------- |
| 编号                 | id           | int          | 是   | 否     | 自增，不能为空 |
| 博物馆id             | Museumid     | int          | 否   | 是     | 不能为空       |
| 地址                 | address      | varchar      | 否   | 是     | 不能为空       |

##### 3.博物馆主题提取

| **字段中文（注释）** | **字段英文** | **字段类型** | 主键 | 允许空 | 说明           |
| -------------------- | ------------ | ------------ | ---- | ------ | -------------- |
| 博物馆编号           | id           | int          | 是   | 否     | 自增，不能为空 |
| 博物馆名称           | name         | varchar      | 否   | 是     |                |
| 博物馆简介           | introduction | varchar      | 否   | 是     |                |



##### 4.展览

| **字段中文（注释）** | **字段英文**       | **字段类型** | 主键 | 允许空 | 说明           |
| -------------------- | ------------------ | ------------ | ---- | ------ | -------------- |
| 编号                 | id                 | int          | 是   | 否     | 自增，不能为空 |
| 博物馆id             | Museumid           | int          | 否   | 是     |                |
| 藏品所属展览名字     | Exhibitname        | varchar      | 否   | 是     |                |
| 展览简介             | Exhibitsummary     | varchar      | 否   | 是     |                |
| 藏品名称             | Collectionname     | varchar      | 否   | 是     | 不能为空       |
| 藏品图片地址         | Collectionimageurl | varchar      | 否   | 是     |                |
| 藏品简介             | Collectionsummary  | varchar      | 否   | 是     |                |



## 3.2功能需求

### 3.2.1数据爬取

#### a． **引言**

​	通过爬虫，将博物馆的名称、博物馆类型、博物馆地址、博物馆票价、开馆时间、简介、建议游玩时间、景点、博物馆内景图、博物馆封面图、博物馆展览、博物馆藏品、博物馆前往路线、博物馆藏品简介、博物馆经纬度爬取下来作为原始数据。

#### b． **输入**

​    博物馆网站链接

#### c． **处理**

检查是否为有效连接

若为有效连接则通过互联网访问

#### d． **输出**

存储204个国家一级博物馆基本信息的表格。

### 3.2.2数据加工

#### a． **引言**

对爬取的所有博物馆的数据，进行异常值、不合法数值进行删除，并且筛选出有价值的字段进行保存。

#### b． **输入**

  爬取到的所有博物馆的基本信息。

#### c． **处理**

将非法数值、异常值进行剔除，并且提取出预设定好的字段。

#### d． **输出**

处理好的博物馆的基本信息表格。

### 3.2.3 数据加工之主体提取

#### a． **引言**

根据TF-IDF算法对博物馆的简介进行关键词提取，方便后续的模糊搜索功能的实现以及标签的建立。

#### b． **输入**

  爬取到的博物馆的简介

#### c． **处理**

根据TF-IDF算法对博物馆的简介进行关键词提取。

#### d． **输出**

每个博物馆的主题

### 3.2.4 数据导入

将所有爬取到的信息按照数据库规格说明要求上传到数据库当中。

### 3.2.5 数据更新

支持数据的持续更新，每天爬取一次新的数据，更新原有数据。

## 3.3 外部接口需求

### 3\.3.1 用户接口

不对用户提供使用权限

### 3.3.2 硬件接口

无硬件接口要求

### 3.3.3软件接口

需要及时和后台数据库保持沟通和联系，确保能够正常访问数据库并且数据能够及时上传。确保服务器能够正常运行，且部署的定时任务能够定期完成。

### 3.3.4通讯接口

  HTTP协议

## 3.4 性能需求

### 3.4.1时间需求

确保能够在较短的时间之内实现数据的爬取。

### 3.4.2质量需求

确保爬取的数据都是有用且有效真实的信息。

### 3.4.3时效性

确保能够定时爬取信息，能够在固定周期实现数据的爬取，并且上传到数据库当中。

# 四、 设计约束

## 4.1 标准的约束

| 使用的语言  | 使用的官方库 |
| ----------- | ------------ |
| `python`3.8 | request      |
| `python`3.8 | `xlrd`       |
| `python`3.6 | selenium     |
| `python`3.8 | pandas       |
|             |              |

## 4.2 硬件的限制

服务器接口使用的是8082

服务器的内存为`128M`

服务器承载的能力优先可能会带来无法录入所有的图片，无法将所有爬取到的内容部署到服务器当中。

## 4.3 技术的限制

暂无技术限制。

# 五、软件质量属性

## 5.1 安全性

本系统提供的是整个软件需要的数据以及加工后的数据和额外的数据资源，这些数据都是不可以被用户直接进行访问和修改的，用户只能在前端页面上进行查看，并不能直接操作数据库，更不能直接操作原始数据。因此本系统具有非常高的安全性，同时可维护性使得系统的安全有了进一步的保障。

## 5.2 可维护性

可维护性较强，由于python设定的异常类型，如果出现服务器无法正常访问、数据库无法正常连接、网址无法正常访问等等问题都会抛出异常，便可以进行维护，因此非常方便管理员进行维护。

## 5.3 可移植性

本系统采用了官网与其他网站共同爬取的信息，其信息的可移植性较好，只要有配置好的环境就可以进行移植，并且可以立即在本地保存结果。



# 六、其他需求

## 6.1 数据库

`Mysql`数据库

## 6.2 服务器

内存在2G的服务器



# 七、待确定问题

| 需求ID | 问题描述 | 影响 | 风险 | 责任人 | 解决日期 | 状态(Open/Close) |
| ------ | -------- | ---- | ---- | ------ | -------- | ---------------- |
|        |          |      |      |        |          |                  |
|        |          |      |      |        |          |                  |
|        |          |      |      |        |          |                  |
|        |          |      |      |        |          |                  |
|        |          |      |      |        |          |                  |
|        |          |      |      |        |          |                  |